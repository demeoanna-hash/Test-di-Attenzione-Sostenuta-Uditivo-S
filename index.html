<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>TAS-U /s/ ‚Äì Test di Attenzione Uditiva</title>
<style>
body {
  font-family: system-ui, sans-serif;
  max-width: 700px;
  margin: 40px auto;
  background: #f7f9ff;
  padding: 20px;
  line-height: 1.6;
}
#timer { font-size: 1.4rem; font-weight: bold; margin-top: 20px; }
.hidden { display: none; }
button {
  padding: 12px 22px;
  font-size: 1rem;
  background: #2b63d9;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
button:hover { background: #1f4eb0; }
</style>
</head>

<body>

<h1>TAS-U /s/ ‚Äì Test di Attenzione Uditiva</h1>

<p>
Ascolterai una sequenza di parole. Il tuo compito √®
<strong>contare tutte le parole che iniziano con S-</strong>.
Non puoi mettere in pausa, tornare indietro o riascoltare il file.
</p>

<p>Quando sei pronto, clicca il pulsante qui sotto per avviare il test.</p>

<button id="start-btn">Inizia il test</button>

<div id="timer">Tempo: --:--</div>

<audio id="audio" src="S.mp3"></audio>

<div id="end-message" class="hidden">
  <h2>üèÅ Il test √® terminato</h2>
  <p>Torna al Google Moduli e inserisci il numero totale di parole con S- che hai individuato.</p>
</div>

<script>
const audio = document.getElementById("audio");
const timer = document.getElementById("timer");
const endMessage = document.getElementById("end-message");
const startBtn = document.getElementById("start-btn");

// niente controlli
audio.controls = false;
audio.setAttribute("controlsList", "nodownload noplaybackrate");
audio.preload = "auto";

// avvio dopo clic
startBtn.addEventListener("click", () => {
  startBtn.style.display = "none";
  audio.play();
});

// timer parte quando l'audio conosce la durata
audio.onloadedmetadata = () => {
  let dur = Math.floor(audio.duration);

  const countdown = setInterval(() => {
    let min = Math.floor(dur / 60);
    let sec = dur % 60;
    timer.textContent = `Tempo: ${min}:${sec.toString().padStart(2,'0')}`;

    dur--;
    if (dur < 0) {
      clearInterval(countdown);
      timer.textContent = "Tempo: 0:00";
    }
  }, 1000);
};

audio.onended = () => {
  endMessage.classList.remove("hidden");
};
</script>

</body>
</html>
